<template>
    <div class="left-menu">
        <el-menu :default-openeds="groupDefOpen" :default-active="defUrl" router>
            <el-menu-item :index="item.url" v-for="item in menuGroup" :key="item.url">
                <span>{{ item.name }}</span>
            </el-menu-item>
            <el-sub-menu
                v-for="(group, gIndex) in myMusicGroup"
                :key="group.name"
                :index="`${gIndex}`"
            >
                <template #title v-if="group.name">{{ group.name }}</template>
                <el-menu-item :index="item.url" v-for="item in group.children" :key="item.url">
                    <i class="iconfont" :class="item.icon"></i>
                    <span class="pl-1">{{ item.name }}</span>
                </el-menu-item>
            </el-sub-menu>
        </el-menu>
    </div>
</template>

<script setup lang="ts">
import { menuGroup, myMusicGroup } from '@/types/layout/leftMenu'
import { useRoute } from 'vue-router'
const route = useRoute()
const defUrl = computed(() => {
    return route.matched.length > 1 ? route.matched[0].path : route.path
})

const groupDefOpen = Array.from({ length: myMusicGroup.length }, (v, i) => `${i}`)
</script>

<style lang="scss" scoped>
.left-menu {
    width: 200px;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    border-right: 1px solid #e1e1e1;
    padding: 12px 6px 12px 12px;

    :deep(.el-menu) {
        border-right: 0;
    }

    :deep(.el-menu-item) {
        border-right: 4px;
        font-size: 14px;
        height: 36px;
        line-height: 36px;
        margin-bottom: 2px;
        padding-left: 8px !important;
    }

    :deep(.el-menu-item.is-active) {
        background-color: #f6f6f7;
        font-size: 18px;
        font-weight: bold;
        color: #313131;
        font-family: '黑体';
    }

    :deep(.el-sub-menu .el-menu-item) {
        min-width: auto;
    }

    :deep(.el-sub-menu__title:hover) {
        background-color: transparent;
    }

    :deep(.el-sub-menu__title) {
        padding-left: 8px !important;
        color: #c4c4c4;
    }

    :deep(.el-sub-menu .el-menu-item.is-active) {
        font-size: 14px;
        font-weight: normal;
        color: #303133;
        font-family: initial;
    }

    .iconfont {
        font-size: 15px;
    }
}
</style>
